<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{!-- external links:  --}}
        {{!-- BOOTSTRAP --}}
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        {{!-- /BOOTSTRAP --}}
    {{!-- /external links:  --}}
    {{!-- internal links:  --}}
        {{!-- STYLE --}}
        <link rel="stylesheet" href="public/css/home.css">
        {{!-- /STYLE --}}

        <title>SkyZoneWX</title>
    </head>
    <body>
      <div class="video-container">
            <video autoplay muted loop playsinline class="bg-video">
                <source src="../public/img/ra3d.mp4" type="video/mp4">
            </video>
        <div class="overlay"></div>
      </div>
        <header><h1>{{>header}}</h1></header>
        <div class="container mt-5">
          {{#if error}}
            <div class="alert alert-danger">{{error}}</div>
          {{/if}}
          <div id="loadingSpinner" class="loadingSpinner text-center rounded rounded-4 h-75 mt-5 mb-4 ms-3 me-3">
            <div class="spinner-border text-info" role="status">
              <span class="visually-hidden">Loading...</span><br>
            </div>
              <h4>Fetching weather data...</h4>
          </div>
          <div id="weatherContainer" style="display:none;">
            {{#with fetchedLocationData}}
            <div class="searchContainer text-center text-light rounded rounded-4 h-75 mt-5 mb-4 ms-3 me-3">
              <div class="searchTitleContainer mt-5 mb-5 rounded rounded-4"><h3 class="fs-1">{{cityName}}<img src="{{weatherIcon}}" alt="weather icon" width="64"
                height="64" /></h3></div>

              <div class="locationInfos">
                <div class="h-25 m-auto mb-2 d-flex align-items-center shadow  text-light"><p class="mb-0 cityFeld">üìç<span class="infoSpan">Country/City:</span> {{cityName}}</p></div>
                <div class="h-25 m-auto mb-2 d-flex align-items-center shadow  text-light"><p class="mb-0">üåê<span class="infoSpan">Latitude:</span> {{latitude}}</p></div>
                <div class="h-25 m-auto mb-2 d-flex align-items-center shadow  text-light"><p class="mb-0">üåê<span class="infoSpan">Longitude:</span> {{longitude}}</p></div>
                <div class="h-25 m-auto mb-2 d-flex align-items-center shadow  text-light"><p class="mb-0">üå°Ô∏è<span class="infoSpan">Temperature:</span> {{temperatureCelsius}}</p></div>
              </div>
              {{/with}}
            </div>
          </div>
        </div>
    {{!-- external scripts:  --}}
        {{!-- BOOTSTRAP --}}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        {{!-- /BOOTSTRAP --}}
        {{!-- SWEETALERT2 --}}
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        {{!-- /SWEETALERT2 --}}
    {{!-- /external scripts:  --}}
    {{!-- internal scripts:  --}}
        <script src="../public/js/searchInfosLogic.js"></script>
        <script>
          // Hide spinner and show weather:
          document.addEventListener("DOMContentLoaded", function() {
            setTimeout(()=>{
              const weatherDataExists = {{#if fetchedLocationData}}true{{else}}false{{/if}};
                if (weatherDataExists) {
                  document.getElementById("loadingSpinner").style.display = "none";
                  document.getElementById("weatherContainer").style.display = "block";
                }
                else{
                  document.getElementById("loadingSpinner").style.display = "none";
                  document.getElementById("weatherContainer").style.display = "none";
                }
            },700)
          });
        </script>
    {{!-- /internal scripts:  --}}
    </body>
</html>